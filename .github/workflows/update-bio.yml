name: â€œğŸ¦„ Update Bio with ETH Priceâ€

on:
  schedule:
    # every hour at minute 0
    - cron: '0 * * * *'
  workflow_dispatch:

jobs:
  update-bio:
    runs-on: ubuntu-latest
    steps:
        - name: Update GitHub profile bio
        run: |
          PRICE=${{ steps.price.outputs.price }}
          # Build a bio with emoji â€œbordersâ€ and the live price
          NEW_BIO="ğŸ”·ğŸ¦„ ETH Believer ğŸ¦„ğŸ”· | Current ETH: \$${PRICE} USD"
          echo "âœï¸ Setting new bio to: $NEW_BIO"
          curl -s -o /dev/null -w "%{http_code}" \
            -X PATCH \
            -H "Authorization: token ${{ secrets.USER_BIO_TOKEN }}" \
            -H "Content-Type: application/json" \
            -d "$(jq -n --arg bio "$NEW_BIO" '{bio: $bio}')" \
            https://api.github.com/user
